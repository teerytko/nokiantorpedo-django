{% extends 'fixedbase.html' %}
{% block head_addition %}
<link rel="stylesheet" type="text/css" href="/static/css/table.css">
<link rel="stylesheet" type="text/css" href="/static/css/tables_page.css">
<script src="/static/js/jquery.js" type="text/javascript"></script>
<script src="/static/js/DataTables/media/js/jquery.dataTables.js" type="text/javascript"></script>
<script src="/static/js/DataTables/jquery.jeditable.js" type="text/javascript"></script>
<script src="/static/js/jutils.js" type="text/javascript"></script>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
 
<script type="text/javascript" charset="utf-8">
var oTable;
$(document).ready(function() {
    
    oTable = $('#players').dataTable(
    {
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "/statistics/rest/player?format=dlist",
        "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
            var alink = '<a href="player?sId=' + aData[0];
            alink += '">'+aData[1]+'</a>';
            $('td:eq(0)', nRow).html( alink );
            return nRow;
        },
        "iDisplayLength": 25,
        "aoColumnDefs" : [{ bVisible : false, "sName": "id", "aTargets": [0]},
                          { "sName": "number", "aTargets": [1]},
                          { "sName": "name", "aTargets": [2]},
                          { "sName": "team_name", "aTargets": [3]},
                          { "sName": "goals", "aTargets": [4]},
                          { "sName": "assists", "aTargets": [5]},
                          { "sName": "points", "aTargets": [6]},
                          { "sName": "penalties", "aTargets": [7]},
                          ],
        "aaSorting": [[6,'desc'],[4,'desc']],
        <!-- "oSearch": {"sSearch": "Torpedo"}, -->
        "fnServerParams": function ( aoData ) {
            var keep = ['sEcho', 'sSearch', 'sColumns', 
                        'iSortCol_0', 'sSortDir_0',
                        'iSortCol_1', 'sSortDir_1'];
            var i=0; 
            var dataLenght=aoData.length
            while (i<dataLenght)
            {
                var obj = aoData.shift()
                if ( keep.indexOf(obj.name) != -1 )
                {
                    aoData.push( obj );
                }
                i++;
                
            }
        }
    });
});
</script>
{% endblock %}    
{% block main %}
<h1>Statistiikkaa kaikille!!</h1>
<div id="datatables">
<div id="container">
<table cellpadding="0" cellspacing="0" border="0" class="display" id="players">
    <thead>
        <tr>
            <th width="0%">Id</th>
            <th width="15%">Pelaaja</th>
            <th width="15%">Nimi</th>
            <th width="20%">Joukkue</th>
            <th width="5%">Maalit</th>
            <th width="5%">Syötöt</th>
            <th width="5%">Pisteet</th>
            <th width="5%">Jäähyt</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td colspan="8">null</td>
        </tr>
    </tbody>
</table>
</div>
</div>
{% endblock %}
