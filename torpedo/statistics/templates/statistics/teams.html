{% extends 'statistics/base.html' %}
{{block head_addition}}    
<script type="text/javascript" charset="utf-8">
        var oTable;
        $(document).ready(function() {
        	
            oTable = $('#teams').dataTable(
            {
                "bProcessing": true,
                "bServerSide": true,
                "sAjaxSource": "../rest/team/dlist",
                "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
                    var alink = '<a href="team?sId=' + aData[0];
                    alink += '">'+ aData[0]+' '+aData[1]+'</a>';
                    $('td:eq(0)', nRow).html( alink );
                    return nRow;
                },
                "aoColumnDefs" : [{ "aTargets": [0]},
                                  { "sName": "name", "sClass": "text", "aTargets": [1]}],
                "fnDrawCallback": function () {
                $('td.text').create_edit({ 'oTable' : oTable, 
                                           'sPostUrl': '../rest/team/update'})
                }
            });
        });
</script>
{{end}} 
{{include}}
<div class="main">
  <h1>Teams</h1>
  <div id="datatables">
    {{if auth.has_permission('statistics_admin'):}}
        <p><a href="javascript:void(0);" onclick="add_data(oTable, 'team');" style="color:black">Add team</a></p>
    {{pass}}
  <div id="container">
	<table cellpadding="0" cellspacing="0" border="0" class="display" id="teams">
	  <thead>
	    <tr>
	      <th width="10%">Id</th>
	      <th width="20%">Nimi</th>
	    </tr>
	  </thead>
	  <tbody>
	    <tr>
	      <td colspan="2">null</td>
	     </tr>
	  </tbody>
	</table>
  </div>
  </div>
</div>  

